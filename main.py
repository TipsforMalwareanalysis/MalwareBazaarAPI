from Service import download_malwares, getMalwaresFromSignature
import os
import yaml

def signaturePasser(json_response):
    """
    시그니처 응답을 파싱
    :param json_response: json응답
    :return: 
    """
    try:
        if json_response['query_status'] == "ok":
            data = json_response['data']

            return data
        else:
            pass
    except Exception as e:
        print("오류 발생{}".format(e))

def Initalize():
    """
    Downloads폴더가 없으면 생성
                   있으면 모든 파일 삭제
    """
    malware_downloadPath = "downloads"
    if not os.path.exists(malware_downloadPath):
        os.mkdir(malware_downloadPath)
    else:
        for file in os.listdir(malware_downloadPath):
            os.remove(file)

if __name__ == '__main__':
    signature = 'njrat'

    Initalize()
    json_response = getMalwaresFromSignature(signature)
    # list_responseOfData = signaturePasser(json_response)

    # download_malwares(list_responseOfData)
